(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{102:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return o})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return p}));var r=n(3),a=n(8),i=(n(0),n(113)),l={},o={unversionedId:"reference/admin",id:"reference/admin",isDocsHomePage:!1,title:"Administrator Setup",description:"Install for development",source:"@site/docs/reference/3.admin.md",sourceDirName:"reference",slug:"/reference/admin",permalink:"/docs/reference/admin",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/reference/3.admin.md",version:"current",sidebarPosition:3,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Extra API",permalink:"/docs/reference/extra"},next:{title:"Component Library",permalink:"/docs/reference/library"}},c=[{value:"Jupyter Hub server",id:"jupyter-hub-server",children:[{value:"Install the jupyterhub",id:"install-the-jupyterhub",children:[]},{value:"The iracket kernel",id:"the-iracket-kernel",children:[]},{value:"Install BHDL and start the placement engine",id:"install-bhdl-and-start-the-placement-engine",children:[]}]}],u={toc:c};function p(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(r.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"Install for development"),Object(i.b)("p",null,'For development purpose, you might want to clone the repo and install the cloned\nlocal package. This is known as "linking":'),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"git clone https://\ncd bhdl-lib\nraco pkg install --auto\n")),Object(i.b)("p",null,"This will place a link between the installed packages and this local\ndirectory. Everytime this local code is modified, the update is immediately\navailable for the package ",Object(i.b)("inlineCode",{parentName:"p"},"bhdl"),"."),Object(i.b)("h2",{id:"jupyter-hub-server"},"Jupyter Hub server"),Object(i.b)("p",null,"For demo purpose, it is desired to setup BHDL on a server, so that users can\njust login to the server and run BHDL directly without the hassle of\ninstallation. Also, the auto-placement engine requires GPU to run efficiently,\nwhich may not be available for users' own machines. This section describes the\ngeneral process to setup a jupyterhub server capable of running BHDL."),Object(i.b)("h3",{id:"install-the-jupyterhub"},"Install the jupyterhub"),Object(i.b)("p",null,"This section mostly follows ",Object(i.b)("a",{parentName:"p",href:"https://jupyterhub.readthedocs.io/en/latest/installation-guide-hard.html"},"the official jupyterhub\nguide"),". It\nis simplied a little (removed the conda part) and noted here for quick reference."),Object(i.b)("p",null,"Create a virtual environment for jupyterhub:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"sudo python3 -m venv /opt/jupyterhub/\n")),Object(i.b)("p",null,"Install some packages. Note that if you want install any future packages for\njupyterhub server, like an extension, you must use this executable and install\nit globally."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"sudo /opt/jupyterhub/bin/python3 -m pip install wheel\nsudo /opt/jupyterhub/bin/python3 -m pip install jupyterhub jupyterlab\nsudo /opt/jupyterhub/bin/python3 -m pip install ipywidgets\n")),Object(i.b)("p",null,"Some nodejs dependencies:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"sudo apt install nodejs npm\nsudo npm install -g configurable-http-proxy\n")),Object(i.b)("p",null,"Generate configuration:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"sudo mkdir -p /opt/jupyterhub/etc/jupyterhub/\ncd /opt/jupyterhub/etc/jupyterhub/\nsudo /opt/jupyterhub/bin/jupyterhub --generate-config\n")),Object(i.b)("p",null,"change one config in ",Object(i.b)("inlineCode",{parentName:"p"},"jupyterhub_config.py"),":"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"c.Spawner.default_url = '/lab'\n")),Object(i.b)("p",null,"Add system service so that it can be started as a daemon and auto-start on boot:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"sudo mkdir -p /opt/jupyterhub/etc/systemd\n/opt/jupyterhub/etc/systemd/jupyterhub.service\nsudo ln -s /opt/jupyterhub/etc/systemd/jupyterhub.service /etc/systemd/system/jupyterhub.service\n")),Object(i.b)("p",null,"the service file content:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},'[Unit]\nDescription=JupyterHub\nAfter=syslog.target network.target\n\n[Service]\nUser=root\nEnvironment="PATH=/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/opt/jupyterhub/bin"\nExecStart=/opt/jupyterhub/bin/jupyterhub -f /opt/jupyterhub/etc/jupyterhub/jupyterhub_config.py\n\n[Install]\nWantedBy=multi-user.target\n')),Object(i.b)("p",null,"enable and start it:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"sudo systemctl daemon-reload\nsudo systemctl enable jupyterhub.service\nsudo systemctl start jupyterhub.service\nsudo systemctl status jupyterhub.service\n")),Object(i.b)("p",null,"The default port is ",Object(i.b)("inlineCode",{parentName:"p"},"8000"),", and it seems also to use ",Object(i.b)("inlineCode",{parentName:"p"},"8001"),". Chaning 8000 in\nconfiguration does not change 8001, which in turns seems to make it unable to\nstart two instances of jupyterhub easily."),Object(i.b)("h3",{id:"the-iracket-kernel"},"The iracket kernel"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"sudo apt install libzmq5\ngit clone https://github.com/lihebi/iracket\ncd iracket && git checkout dev\nraco pkg install\nraco iracket install\n")),Object(i.b)("h3",{id:"install-bhdl-and-start-the-placement-engine"},"Install BHDL and start the placement engine"),Object(i.b)("p",null,"Install BHDL:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"raco pkg install git://github.com/lihebi/bhdl/?path=bhdl-lib\n")),Object(i.b)("p",null,"Start placement engine (and this will listen on port 8082 and shared for all\nusers):"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"git clone https://github.com/lihebi/bhdl\ncd bhdl/placement\n# NOTE: Need install Julia dependencies via:\n# julia --project\n# Julia> ]instantiate\njulia --project server.jl\n")),Object(i.b)("h4",{id:"optional-clone-the-bhdl-libraries"},"(Optional) Clone the bhdl libraries:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"git clone --recursive https://github.com/lihebi/bhdl-footprints /opt/bhdl-footprints\nexport BHDL_LIBRARY_PATH=/opt/bhdl-footprints\n")),Object(i.b)("p",null,"Users probably should set up their own libraries in their home directory,\nbecause the easyeda library is written to disk if not available locally, thus users need write access to the library."))}p.isMDXComponent=!0},113:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return h}));var r=n(0),a=n.n(r);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=a.a.createContext({}),p=function(e){var t=a.a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},s=function(e){var t=p(e.components);return a.a.createElement(u.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),s=p(n),d=r,h=s["".concat(l,".").concat(d)]||s[d]||b[d]||i;return n?a.a.createElement(h,o(o({ref:t},u),{},{components:n})):a.a.createElement(h,o({ref:t},u))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=d;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var u=2;u<i;u++)l[u]=n[u];return a.a.createElement.apply(null,l)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);