(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{101:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return l})),a.d(t,"metadata",(function(){return r})),a.d(t,"toc",(function(){return c})),a.d(t,"default",(function(){return b}));var n=a(3),i=(a(0),a(117));const l={},r={unversionedId:"guides/Install",id:"guides/Install",isDocsHomePage:!1,title:"Install",description:"This site is under construction. A release will be available soon (expected Dec. 2021).",source:"@site/docs/guides/1.Install.mdx",sourceDirName:"guides",slug:"/guides/Install",permalink:"/docs/guides/Install",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/guides/1.Install.mdx",version:"current",sidebarPosition:1,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Introduction",permalink:"/docs/intro"},next:{title:"Getting Started",permalink:"/docs/guides/getting-started"}},c=[{value:"Install Racket",id:"install-racket",children:[]},{value:"Install BHDL package",id:"install-bhdl-package",children:[]},{value:"Update BHDL",id:"update-bhdl",children:[]},{value:"JupyterLab IDE",id:"jupyterlab-ide",children:[]},{value:"Placement (Optional)",id:"placement-optional",children:[]},{value:"Freerouting (Optional)",id:"freerouting-optional",children:[]}],o={toc:c};function b(e){let{components:t,...a}=e;return Object(i.b)("wrapper",Object(n.a)({},o,a,{components:t,mdxType:"MDXLayout"}),Object(i.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"This site is under construction. A release will be available soon (expected Dec. 2021)."))),Object(i.b)("h2",{id:"install-racket"},"Install Racket"),Object(i.b)("p",null,"Install ",Object(i.b)("a",{parentName:"p",href:"https://racket-lang.org/"},"racket"),":"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-sh"},"apt install racket\n")),Object(i.b)("p",null,"On MacOS and Windows, you can ",Object(i.b)("a",{parentName:"p",href:"https://download.racket-lang.org/"},"download the installer from the Racket website"),", and setup\nthe commandline properly."),Object(i.b)("h2",{id:"install-bhdl-package"},"Install BHDL package"),Object(i.b)("p",null,"Step 2: Install the BHDL directly as a racket package:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"raco pkg install --auto https://github.com/bhdl/bhdl.git?path=src\n")),Object(i.b)("p",null,"You can now run racket and require bhdl. The first time requiring bhdl, it will download footprint library to ",Object(i.b)("inlineCode",{parentName:"p"},"~/.config/bhdl/bhdl-footprints")," (Linux) or ",Object(i.b)("inlineCode",{parentName:"p"},"~/Library/Application Support/bhdl/bhdl-footprints")," (MacOS)."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-racket"},"racket\n> (require bhdl)\n")),Object(i.b)("p",null,"Then try some of the ",Object(i.b)("a",{parentName:"p",href:"/examples"},"examples"),"."),Object(i.b)("h2",{id:"update-bhdl"},"Update BHDL"),Object(i.b)("p",null,"In the future, you can update the package if there're updates upstream via:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-shell"},"raco pkg update src\n")),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"TODO package name should be ",Object(i.b)("inlineCode",{parentName:"h5"},"bhdl"))),Object(i.b)("div",{parentName:"div",className:"admonition-content"})),Object(i.b)("h2",{id:"jupyterlab-ide"},"JupyterLab IDE"),Object(i.b)("p",null,"In general, you can run racket programs via command line, editor plugins, IDEs. We are not covering them here. Instead, we recommand run the program via jupyter notebook. To set it up, first install jupyter:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-shell"},"pip install jupyterlab\n")),Object(i.b)("p",null,"The ",Object(i.b)("a",{parentName:"p",href:"https://github.com/rmculpepper/iracket"},"iracket")," kernel requires on libzeromq:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-shell"},"sudo apt install libzmq5\n")),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"MacOS")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"On MacOS, it is a little ",Object(i.b)("a",{parentName:"p",href:"https://github.com/rmculpepper/racket-zeromq/issues/6"},"trickier")," to setup libzmq. Specifically, you need to copy the library to the racket's library path, otherwise racket won't find it:"),Object(i.b)("pre",{parentName:"div"},Object(i.b)("code",{parentName:"pre",className:"language-shell"},"brew install zmq\ncp /opt/homebrew/Cellar/zeromq/4.3.4/lib/libzmq.5.dylib Library/Racket/8.2/lib\n")))),Object(i.b)("p",null,"Then install the kernel itself:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-shell"},"raco pkg install iracket\nraco iracket install\n")),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"iracket does not allow write access to file system by default. So you have to\nmodify the kernel file with a ",Object(i.b)("a",{parentName:"p",href:"https://github.com/rmculpepper/iracket/issues/13"},Object(i.b)("inlineCode",{parentName:"a"},"-t"),"\nparameter"),". In short, you need\nto modify the content of ",Object(i.b)("inlineCode",{parentName:"p"},"~/.local/share/jupyter/kernels/racket/kernel.json")," on\nyour system from ",Object(i.b)("inlineCode",{parentName:"p"},'["racket","-l","iracket/iracket","--","{connection_file}"]')," to\n",Object(i.b)("inlineCode",{parentName:"p"},'["racket","-l","iracket/iracket","--","-t","{connection_file}"]')))),Object(i.b)("p",null,"Then start the jupyterlab server:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-shell"},"jupyter lab\n")),Object(i.b)("p",null,"You'll be able to create racket notebooks in the JupyterLab IDE. Inside the\nnotebook, try ",Object(i.b)("inlineCode",{parentName:"p"},"(require bhdl)")," and some of ",Object(i.b)("a",{parentName:"p",href:"/examples"},"the exampels"),"."),Object(i.b)("h2",{id:"placement-optional"},"Placement (Optional)"),Object(i.b)("p",null,"To run the placement engine, you need setup\n",Object(i.b)("a",{parentName:"p",href:"https://julialang.org/"},"julia"),". Refer to their installation guide on how to\ninstall Julia."),Object(i.b)("p",null,"Install the BHDL julia package:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"julia\n]add https://github.com/bhdl/bhdl\n")),Object(i.b)("p",null,"Then run the server:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"import BHDL\nBHDL.web_server()\n")),Object(i.b)("p",null,"This will listen on ",Object(i.b)("inlineCode",{parentName:"p"},"http://0.0.0.0:8082"),". To use this, in racket, set the\nparameter ",Object(i.b)("inlineCode",{parentName:"p"},"placer-url"),", and call ",Object(i.b)("inlineCode",{parentName:"p"},"circuit-export")," with ",Object(i.b)("inlineCode",{parentName:"p"},"#:auto-place #t"),":"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-racket"},';; set placer url\n(placer-url "http://0.0.0.0:8082")\n(circuit-export three-button #:auto-place #t ...)\n')),Object(i.b)("p",null,"This package will detect if Nvidia GPU is available, and use it if possible. The\nfirst time invoking the package, julia will download and instantiate the\ndependencies and download CUDA (julia will not use your system's CUDA setup).\nThe first time the placement is running, Julia will pre-compile the code, thus\nmaybe a little slower. Subsequent placement request will be much faster (which\nis why we use a server instead of invoking the command for every placement request)."),Object(i.b)("h2",{id:"freerouting-optional"},"Freerouting (Optional)"),Object(i.b)("p",null,"To use routing, you need to have\n",Object(i.b)("a",{parentName:"p",href:"https://github.com/freerouting/freerouting"},"freerouting")," available. We tested\non\n",Object(i.b)("a",{parentName:"p",href:"https://github.com/freerouting/freerouting/releases/tag/v1.4.4"},"freerouting-v1.4.4"),". Make\nsure ",Object(i.b)("inlineCode",{parentName:"p"},"freerouting-1.4.4-executable.jar")," is available in your ",Object(i.b)("inlineCode",{parentName:"p"},"$PATH"),"."),Object(i.b)("p",null,"The executable can be downloaded ",Object(i.b)("a",{parentName:"p",href:"https://bintray.com/miho/Freerouting/download_file?file_path=eu%2Fmihosoft%2Ffreerouting%2Ffreerouting%2F1.4.4%2Ffreerouting-1.4.4-executable.jar"},"here")," on the new freerouting maintainer website: ",Object(i.b)("a",{parentName:"p",href:"https://freerouting.mihosoft.eu/"},"https://freerouting.mihosoft.eu/")),Object(i.b)("p",null,"UPDATE: the jar file is often not an executable command. You'll need"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"java -jar freerouting-1.4.4-executable.jar\n")),Object(i.b)("p",null,"Thus, you need to create a executable called ",Object(i.b)("inlineCode",{parentName:"p"},"freerouting"),", containing:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"#!/bin/bash\njava -jar /path/to/freerouting-1.4.4-executable.jar\n")),Object(i.b)("p",null,"freerouting will need X11 window, even if we are running it in command line. Simulate the X11 session via:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"sudo apt install xvfb\nXvfb :1\n")),Object(i.b)("p",null,"But it seems to be impossible to view the progress. We'll probably need to use VNC if we really want to know what's going on."))}b.isMDXComponent=!0}}]);